[defaults]
# Inventário dinâmico
inventory = ./aws_ec2_jumphost.yml

# Usuário padrão (será sobrescrito pelo inventário dinâmico)
remote_user = ec2-user

# Desabilita verificação de host key (para ambientes dinâmicos)
host_key_checking = False

# Timeout para conexões SSH
timeout = 30

# Chave SSH padrão (será sobrescrita se especificada no inventário)
private_key_file = ~/.ssh/id_rsa

# Número de conexões paralelas
forks = 10

# Formato de callback para logs mais limpos
stdout_callback = yaml
stderr_callback = yaml

# Coleta de facts automática
gathering = smart
fact_caching = memory
fact_caching_timeout = 86400

# Retry de tarefas que falharam
retry_files_enabled = True
retry_files_save_path = ./retry

# Logs
log_path = ./ansible.log

[inventory]
# Cache do inventário
cache = True
cache_plugin = memory
cache_timeout = 3600
cache_connection = /tmp/ansible-inventory-cache

[ssh_connection]
# SSH multiplexing para conexões mais rápidas
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o ControlPath=/tmp/%h-%p-%r

# Pipeline SSH para melhor performance
pipelining = True

# Timeout SSH
timeout = 10

# Retry automático
retries = 3

[colors]
# Cores para output mais legível
highlight = white
verbose = blue
warn = bright purple
error = red
debug = dark gray
deprecate = purple
skip = cyan
unreachable = red
ok = green
changed = yellow
diff_add = green
diff_remove = red
diff_lines = cyan
